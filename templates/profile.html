{% extends "layout.html" %}
{% block title %}Profile{% endblock %}
{% block content %}
{% if username %}
<p>Logged in as {{ username }}</p>
{% endif %}
<div class="form">
    <p>Change username:</p>
    <form action="/change_username" method="POST">
        <p>New username:<br>
            <input type="text" name="new_name">
        </p>
        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
        <input type="submit" value="Change">
    </form>
</div>

<div class="form">
    <p>Change password:</p>
    <form action="/change_password" method="POST">
        <p>Old password:<br>
            <input type="text" name="old_password">
        </p>
        <p>New password:<br>
            <input type="text" name="new_password1">
        </p>
        <p>New password again:<br>
            <input type="text" name="new_password2">
        </p> 
        <input type="hidden" name="username" value={{ username }}>
        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
        <input type="submit" value="Change">
    </form>
</div>

<div class="flex-container form">
    <div class="change-picture">
        <p>Change profile picture:</p>
        <form action="/change_picture" method="POST" enctype="multipart/form-data">
            <p>File:<br>
                <input type="file" name="file">
            </p>
            <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
            <input type="submit" value="Change">
        </form>
    </div>

    <div class="img_container">
        <img src="/image/{{userid}}" style="width:128px;height:128px;" onError="this.src ='/static/images/default.jpg'">
    </div>
</div>



{% endblock %}